{"version":3,"sources":["../src/confirmdelete.js"],"names":["define","$","Ajax","str","ModalFactory","ModalEvents","Notification","on","elementId","attr","arr","split","scoreId","length","create","type","types","SAVE_CANCEL","title","get_string","body","then","modal","setSaveButtonText","root","getRoot","save","call","methodname","args","done","window","location","href","fail","exception","show"],"mappings":"AAsBAA,OAAM,qCAAC,CACH,QADG,CAEH,WAFG,CAGH,UAHG,CAIH,oBAJG,CAKH,mBALG,CAMH,mBANG,CAAD,CAOH,SAASC,CAAT,CACUC,CADV,CAEUC,CAFV,CAGUC,CAHV,CAIUC,CAJV,CAKUC,CALV,CAKwB,CAEvBL,CAAC,CAAC,aAAD,CAAD,CAAiBM,EAAjB,CAAoB,OAApB,CAA6B,UAAW,IAChCC,CAAAA,CAAS,CAAGP,CAAC,CAAC,IAAD,CAAD,CAAQQ,IAAR,CAAa,IAAb,CADoB,CAEhCC,CAAG,CAAGF,CAAS,CAACG,KAAV,CAAgB,GAAhB,CAF0B,CAGhCC,CAAO,CAAGF,CAAG,CAACA,CAAG,CAACG,MAAJ,CAAa,CAAd,CAHmB,CAKpCT,CAAY,CAACU,MAAb,CAAoB,CAChBC,IAAI,CAAEX,CAAY,CAACY,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAEf,CAAG,CAACgB,UAAJ,CAAe,aAAf,CAA8B,qBAA9B,CAAqD,EAArD,CAAyD,EAAzD,CAFS,CAGhBC,IAAI,CAAEjB,CAAG,CAACgB,UAAJ,CAAe,cAAf,CAA+B,qBAA/B,CAAsD,EAAtD,CAA0D,EAA1D,CAHU,CAApB,EAKGE,IALH,CAKQ,SAASC,CAAT,CAAgB,CACpBA,CAAK,CAACC,iBAAN,CAAwBpB,CAAG,CAACgB,UAAJ,CAAe,QAAf,CAAyB,qBAAzB,CAAgD,EAAhD,CAAoD,EAApD,CAAxB,EACA,GAAIK,CAAAA,CAAI,CAAGF,CAAK,CAACG,OAAN,EAAX,CACAD,CAAI,CAACjB,EAAL,CAAQF,CAAW,CAACqB,IAApB,CAA0B,UAAW,CASjCxB,CAAI,CAACyB,IAAL,CAAU,CAJI,CACVC,UAAU,0CADA,CAEVC,IAAI,CALK,CACT,QAAWjB,CADF,CAGC,CAIJ,CAAV,EAAqB,CAArB,EAAwBkB,IAAxB,CAA6B,UAAW,CACpCC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBhC,CAAC,CAAC+B,QAAD,CAAD,CAAYvB,IAAZ,CAAiB,MAAjB,CAC1B,CAFD,EAEGyB,IAFH,CAEQ5B,CAAY,CAAC6B,SAFrB,CAGH,CAZD,EAaAb,CAAK,CAACc,IAAN,EACH,CAtBD,CAuBH,CA5BD,CA6BH,CA3CK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Confirm modal before delete.\n *\n * @module     local_footballscore/confirmdelete\n * @copyright  2021 Shadman Ahmed\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/str',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/notification'\n], function($,\n             Ajax,\n             str,\n             ModalFactory,\n             ModalEvents,\n             Notification) {\n\n    $('.delete-btn').on('click', function() {\n        let elementId = $(this).attr('id');\n        let arr = elementId.split(\"-\");\n        let scoreId = arr[arr.length - 1];\n        // eslint-disable-next-line promise/catch-or-return\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: str.get_string('deletetitle', 'local_footballscore', '', ''),\n            body: str.get_string('modalmessage', 'local_footballscore', '', '')\n            // eslint-disable-next-line promise/always-return\n        }).then(function(modal) {\n            modal.setSaveButtonText(str.get_string('delete', 'local_footballscore', '', ''));\n            let root = modal.getRoot();\n            root.on(ModalEvents.save, function() {\n                let wsfunction = 'local_foootballscore_delete_score_by_id';\n                let params = {\n                    'scoreid': scoreId,\n                };\n                let request = {\n                    methodname: wsfunction,\n                    args: params\n                };\n                Ajax.call([request])[0].done(function() {\n                    window.location.href = $(location).attr('href');\n                }).fail(Notification.exception);\n            });\n            modal.show();\n        });\n    });\n});"],"file":"confirmdelete.min.js"}